---
import { string } from 'astro:schema';
import Tus_Clases from '../../components/Tus_Clases.astro';
import MainLayout from '../../layouts/MainLayout.astro';
import {getMedia, getRecurses, getAllMedia} from '../../lib/WorpressH';

const param = Astro.params.name;

export async function getStaticPaths(){
	const grados = await getRecurses("grado");
	
	return grados.map( ({name}) => ({ params: {name}}) )
}




//console.log(param)

const habilidades = await getRecurses("habilidad");
const grados = await getRecurses("grado");

const periodos = await getRecurses("periodo");


const gradoId = grados.find( ({name}) =>{  return name  === param });
const media = await getMedia(gradoId.id);
console.log(media)
const habilidadesId = habilidades.map( ({id}) => id )

const allMedia = await getAllMedia(habilidadesId.toString());

//console.log(periodos)
---


<MainLayout title="Tus cursos">
	<Tus_Clases media={media} periodos={periodos} habilidades={habilidades} allMedia={allMedia} />
</MainLayout>