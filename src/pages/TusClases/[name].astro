---
import { string } from 'astro:schema';
import Tus_Clases from '../../components/Tus_Clases.astro';
import MainLayout from '../../layouts/MainLayout.astro';
import {getMedia, getRecurses, getAllMedia} from '../../lib/WorpressH';



export async function getStaticPaths(){
	const grados = await getRecurses("grado");
	console.log(grados)
	return grados.map( ({name}) => ({ params: {name}}) )

}

const param = Astro.params.name;


//console.log(param)

const habilidades = await getRecurses("habilidad");
const grados = await getRecurses("grado");

const periodos = await getRecurses("periodo");


const gradoId = grados.find( ({name}) =>{  return name  === param });
const media = await getMedia(gradoId.id);

const habilidadesId = habilidades.map( ({id}) => id )

const allMedia = await getAllMedia(habilidadesId.toString());

//console.log(periodos)
export const prerender = true;
---


<MainLayout title="Tus cursos">
	<Tus_Clases media={media} periodos={periodos} habilidades={habilidades} allMedia={allMedia} />
</MainLayout>